<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AUKit: AUKit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AUKit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">AUKit </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a>AUKit: Audio decoding and processing framework for ComputerCraft</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Supported audio formats</h1>
<p>All sample rates and channel counts are supported. Functions to convert to ComputerCraft's expected 48kHz are provided, and handled automatically while streaming.</p><ul>
<li>Raw linear PCM, 8-, 16-, 24-, or 32-bit signed/unsigned little/big endian</li>
<li>Raw linear PCM, 32-bit floating point little/big endian</li>
<li>Raw DFPWM</li>
<li>Raw Microsoft ADPCM</li>
<li>Raw IMA ADPCM</li>
<li>Raw G.711, A-law or µ-law</li>
<li>MDFPWMv3</li>
<li>WAV, PCM, 8-bit, 16-bit, 24-bit, 32-bit, or float</li>
<li>WAV, DFPWM</li>
<li>WAV, Microsoft ADPCM</li>
<li>WAV, IMA ADPCM</li>
<li>WAV, G.711, A-law or µ-law</li>
<li>AIFF, PCM, 8-bit, 16-bit, 24-bit, or 32-bit</li>
<li>AIFC, PCM, 32-bit float</li>
<li>AIFC, G.711, A-law or µ-law</li>
<li>AU, PCM, 8-bit, 16-bit, 24-bit, 32-bit, or float</li>
<li>AU, G.711, A-law or µ-law</li>
<li>FLAC, 8-bit, 16-bit, 24-bit, or 32-bit</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Usage</h1>
<p>Download <code><a class="el" href="aukit_8lua.html">aukit.lua</a></code> to your computer. You can also grab <code>austream</code> and <code>auplay</code> if you'd like. Then simply use <code>local aukit = require "aukit"</code> to load the library in a program.</p>
<p>Basic audio playback can be achieved in only two lines:</p>
<div class="fragment"><div class="line">local <a class="code hl_class" href="classaukit.html">aukit</a> = require <span class="stringliteral">&quot;aukit&quot;</span></div>
<div class="line"><a class="code hl_class" href="classaukit.html">aukit</a>.<a class="code hl_function" href="classaukit.html#ab135ad60ad9997a2639213fd32421f4b">play</a>(<a class="code hl_class" href="classaukit.html">aukit</a>.<a class="code hl_variable" href="classaukit.html#af0904af286bfef75382d742671134a80">stream</a>.<a class="code hl_function" href="classaukit.html#a75a38d5bcfd57d577b0049a2e2b42f66">wav</a>(io.lines(<span class="stringliteral">&quot;file.wav&quot;</span>, 48000)), peripheral.find(<span class="stringliteral">&quot;speaker&quot;</span>))</div>
<div class="ttc" id="aclassaukit_html"><div class="ttname"><a href="classaukit.html">aukit</a></div><div class="ttdoc">The main AUKit module.</div><div class="ttdef"><b>Definition</b> aukit.lua:88</div></div>
<div class="ttc" id="aclassaukit_html_a75a38d5bcfd57d577b0049a2e2b42f66"><div class="ttname"><a href="classaukit.html#a75a38d5bcfd57d577b0049a2e2b42f66">aukit::wav</a></div><div class="ttdeci">aukit Audio wav(string data, boolean head)</div><div class="ttdoc">Creates a new audio object from a WAV file. This accepts PCM files up to 32 bits, including float dat...</div></div>
<div class="ttc" id="aclassaukit_html_ab135ad60ad9997a2639213fd32421f4b"><div class="ttname"><a href="classaukit.html#ab135ad60ad9997a2639213fd32421f4b">aukit::play</a></div><div class="ttdeci">play(fun() →number❲❳❲❳ ¦ nil callback, fun(pos→ number)? progress, number? volume, ❴ playAudio→ fun(samples→ number❲❳‚ volume?→ number) ❵ ...)</div><div class="ttdoc">Plays back stream functions created by one of the aukit.stream functions or Audio....</div></div>
<div class="ttc" id="aclassaukit_html_af0904af286bfef75382d742671134a80"><div class="ttname"><a href="classaukit.html#af0904af286bfef75382d742671134a80">aukit::stream</a></div><div class="ttdeci">aukit stream stream</div><div class="ttdoc">Loader functions for streaming audio from a remote resource. These are usually used with aukit....</div><div class="ttdef"><b>Definition</b> aukit.lua:278</div></div>
</div><!-- fragment --><p>For information about the API, see <a href="https://mcjack123.github.io/AUKit/">the Lua docs</a>.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
<code>austream</code>/<code>auplay</code></h2>
<p>Both <code>austream</code> and <code>auplay</code> take a path as an argument. <code>austream</code> additionally supports HTTP(S), WS(S), and Rednet URLs. The difference between the two programs is that <code>auplay</code> preloads files, always plays in mono, and normalizes the audio. <code>austream</code> does all processing while playing, and supports multiple speakers, but does no processing outside of resampling (and mixing to mono if there's multiple audio channels but only one speaker).</p>
<p>Both programs require the argument to end with the correct file extension - this is used to detect the file type. The file type can also be forced by adding <code>type=&lt;extension&gt;</code> to the parameter list. If using WebSocket or Rednet URLs, add a path with a (fake) file name which has the required file extension. Rednet does not require a path, but if none is given then 8-bit signed PCM at 48kHz is assumed. Files with the extension <code>.pcm</code> or <code>.raw</code> are taken as raw PCM data. Unspecified arguments to PCM data use the defaults <a href="https://mcjack123.github.io/AUKit/#aukit.stream.pcm">listed by <code>aukit.stream.pcm</code></a>.</p>
<p><code>austream</code> accepts Rednet URIs in the format <code>rednet[+&lt;protocol&gt;]://&lt;id&gt;[/&lt;path&gt;]</code>. If a protocol is specified, only messages with the specified protocol will be accepted. If a path is specified, it will be sent to the other computer before reading any data. If the ID is <code>-1</code>, all senders will be accepted, but no paths will be sent. The sender must send <code>nil</code> to report no more data is available. Example: <code>austream rednet+wav://6/file.wav</code></p>
<p>To avoid overflowing the CC event queue, it is recommended that a delay is added to senders.</p>
<p><code>austream_tm</code> is an alternate version of <code>austream</code> that takes advantage of the <a href="https://gist.github.com/MCJack123/1678fb2c240052f1480b07e9053d4537">Taskmaster</a> library to provide pausing and seeking while playing. Taskmaster must be downloaded next to <code>austream_tm</code> for it to function. Press space to pause/play, left/right arrow to seek back/forward 5 seconds, and Q to quit.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
Parameter list</h3>
<p><code>austream</code> also accepts parameters for the file in a second argument using a table-like format (quotes are optional for strings): <code>austream file.bin type=pcm,sampleRate=44100,bitDepth=16,dataType=signed,channels=2,bigEndian=false</code></p>
<p>The following options are supported in the parameter list:</p><ul>
<li><code>type</code> [all]: Type of file to load (<code>pcm</code>, <code>dfpwm</code>, <code>wav</code>, <code>aiff</code>, <code>au</code>, <code>flac</code>)</li>
<li><code>streamData</code> [all]: Whether to force streaming file data instead of reading all at once (<code>true</code>, <code>false</code>) (default false)</li>
<li><code>volume</code> [all]: Playback volume from 0.0 to 3.0 (default 1.0)</li>
<li><code>mono</code> [all]: Whether to mix audio down to mono (<code>true</code>, <code>false</code>) (default false)</li>
<li><code>interpolation</code> [all]: Interpolation mode to use when resampling (<code>none</code>, <code>linear</code>, <code>cubic</code>)</li>
<li><code>sampleRate</code> [pcm, dfpwm]: Sample rate of the audio (default 48000 Hz)</li>
<li><code>channels</code> [pcm, dfpwm]: Number of channels in the file (default 1)</li>
<li><code>bitDepth</code> [pcm]: Bit depth of each sample (8, 16, 24, 32) (default 8)</li>
<li><code>dataType</code> [pcm]: Type of data of each sample (<code>signed</code>, <code>unsigned</code>, <code>float</code>) (default signed)</li>
<li><code>bigEndian</code> [pcm]: Whether integers are in big endian form (<code>true</code>, <code>false</code>) (default false)</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
<code>auconvert</code></h2>
<p><code>auconvert</code> is a program similar to FFmpeg that allows you to convert and modify audio files using AUKit. It is currently in beta, and has not been thoroughly tested; however, it appears to work.</p>
<div class="fragment"><div class="line">auconvert - Modify and convert audio files</div>
<div class="line"> </div>
<div class="line">Usage: auconvert &lt;options...&gt;</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -i|--input &lt;path&gt;                 Input file (can specify multiple)</div>
<div class="line">  -o|--output &lt;path&gt;                Output file (can specify multiple)</div>
<div class="line">  -f|--input-format &lt;format&gt;        Format of the last input file</div>
<div class="line">  -F|--output-format &lt;format&gt;       Format of the last output file</div>
<div class="line">    For available formats, use `-[f|F] list`</div>
<div class="line">  -b|--input-bit-depth &lt;bits&gt;       Bit depth of the last input file</div>
<div class="line">  -B|--output-bit-depth &lt;bits&gt;      Bit depth of the last output file</div>
<div class="line">  -t|--input-data-type &lt;type&gt;       Data type of the last input file</div>
<div class="line">  -T|--output-data-type &lt;type&gt;      Data type of the last output file</div>
<div class="line">  -c|--input-channels &lt;number&gt;      Channel count of the last input file</div>
<div class="line">  -C|--output-channels &lt;number&gt;     Channel count of the last output file</div>
<div class="line">  -r|--input-sample-rate &lt;rate&gt;     Sample rate of the last input file</div>
<div class="line">  -R|--output-sample-rate &lt;rate&gt;    Sample rate of the last output file</div>
<div class="line"> </div>
<div class="line">  -e|--effect &lt;name&gt;[,&lt;args...&gt;]    Apply an effect to the last output file before writing</div>
<div class="line">    For available effects, use `-e list`</div>
<div class="line">  -m|--map &lt;map command&gt;            Map one or more input channels to an output channel</div>
<div class="line">     --interpolation &lt;type&gt;         Set the interpolation type for audio scaling (none, linear, cubic)</div>
<div class="line">  -h|--help                         Show this help</div>
<div class="line"> </div>
<div class="line">Map command format:</div>
<div class="line">  General form: &lt;input&gt;[&lt;operator&gt;&lt;param&gt;]...=&lt;output&gt;</div>
<div class="line">  Multiple files can be specified through &lt;file index&gt;:&lt;channel&gt; (defaults to file 1)</div>
<div class="line">  Only one map can be specified per output channel</div>
<div class="line">  Operators:</div>
<div class="line">    &lt;a&gt;+&lt;b&gt;: Concatenate channels</div>
<div class="line">    &lt;a&gt;&amp;&lt;b&gt;: Mix channels</div>
<div class="line">    &lt;a&gt;*&lt;n&gt;: Repeat channel `n` times</div>
<div class="line">    &lt;a&gt;[[start],[end]]: Split channel (start/end refer to time in seconds, negative = from end, if end = 0 then end is end of file)</div>
<div class="line">    Order of operations: () [] * + &amp;</div>
<div class="line">    Parentheses may be used to override operation order</div>
<div class="line">  Examples:</div>
<div class="line">    1=1             -&gt; map input channel 1 to output channel 1</div>
<div class="line">    1:2=2:1         -&gt; map input file 1 channel 2 to output file 2 channel 1</div>
<div class="line">    1:1+2:1+3:1=1   -&gt; map the concatenation of the first channels of input files 1-3 to output file 1 channel 1</div>
<div class="line">    1&amp;2=1           -&gt; mix input channels 1 &amp; 2 to output channel 1 (can work as stereo-to-mono mixdown)</div>
<div class="line">    1[,10]=1        -&gt; map first 10 seconds of input channel 1 to output channel 1</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
License</h1>
<p>AUKit is licensed under the MIT license. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
